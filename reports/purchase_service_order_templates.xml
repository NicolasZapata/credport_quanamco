<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="external_layout_custom_purchase_service_order">
        <t t-if="not o" t-set="o" t-value="doc"/>

        <t t-if="not company">
            <!-- Multicompany -->
            <t t-if="company_id">
                <t t-set="company" t-value="company_id"/>
            </t>
            <t t-elif="o and 'company_id' in o">
                <t t-set="company" t-value="o.company_id.sudo()"/>
            </t>
            <t t-else="else">
                <t t-set="company" t-value="res_company"/>
            </t>
        </t>

        <t t-call="credport_quanamco.external_layout_purchase">
            <t t-raw="0"/>
        </t>
    </template>
    <template id="external_layout_purchase">
        <t t-set="o" t-value="o.with_context(lang=lang)"/>
        <div t-attf-class="header o_company_#{company.id}_layout" t-att-style="report_header_style">
            <div class="row">


            </div>
        </div>
        <div t-attf-class="article o_report_layout_standard o_company_#{company.id}_layout"
             t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id"
             t-att-data-oe-lang="o and o.env.context.get('lang')">
            <t t-call="web.address_layout"/>
            <t t-raw="0"/>
        </div>

        <!--<div t-attf-class="footer o_standard_footer o_company_#{company.id}_layout">-->
            <!--<div class="text-center ">-->
                <!--<div name="financial_infos">-->
                    <!--<span t-field="company.report_footer"/>-->
                <!--</div>-->

                <!--<div t-if="report_type == 'pdf'" class="text-muted">-->
                    <!--Page:-->
                    <!--<span class="page"/>-->
                    <!--/-->
                    <!--<span class="topage"/>-->
                <!--</div>-->
            <!--</div>-->
        <!--</div>-->


    </template>



















<template id="report_purchaseorder_document_custom_service_order">
    <t t-call="credport_quanamco.external_layout_custom_purchase_service_order">
        <t t-set="o" t-value="o.with_context(lang=o.partner_id.lang)"/>

        <div class="page" style="font-size: 12px;">

                    <!--<style>-->
                        <!--.footer{-->
                            <!--padding:0 !important;-->
                            <!--margin:0 !important;-->
                            <!--background-color:red !important;-->
                            <!--width:100px !important;-->
                            <!--height:100px !important;-->
                        <!--}-->

                        <!--.footer_custom{-->

                            <!--background-color:yellow !important;-->

                        <!--}-->
                    <!--</style>-->


            <FONT FACE="arial">
            <table style="border: 1px solid #000000 !important;text-align: center;" class="table table-sm o_main_table">
                <tr style="border: 1px solid #000000 !important;">

                    <td rowspan="3" style="border: 1px solid #000000 !important;">
                        <img t-if="o.company_id.logo"
                             t-att-src="image_data_uri(o.company_id.logo)"
                             class="float-left" width="210px" height="90"/>

                    </td>

                    <td colspan="4" style="border: 1px solid #000000 !important;font-size: 14px;"><b>ORDEN DE SERVICIO : <t t-esc="o.name"/></b></td>

                </tr>

                <tr style="border: 1px solid #000000 !important;background-color: #AB1D1D;color:#FFFFFF;font-size: 14px;">
                    <td style="border: 1px solid #000000 !important;"><strong>CÓDIGO</strong></td>
                    <td style="border: 1px solid #000000 !important;"><strong>VERSIÓN</strong></td>
                    <td style="border: 1px solid #000000 !important;"><strong>F.V.</strong></td>
                    <td style="border: 1px solid #000000 !important;"><strong>PAGINA</strong></td>

                </tr>

                <tr style="border: 1px solid #000000 !important;">
                    <td style="border: 1px solid #000000 !important;"><span t-esc="o.get_report_header('service')[0]"/></td>
                    <td style="border: 1px solid #000000 !important;"><span t-esc="o.get_report_header('service')[1]"/></td>
                    <td style="border: 1px solid #000000 !important;"><span t-esc="o.get_report_header('service')[2]"/></td>
                    <td style="border: 1px solid #000000 !important;">1/1</td>
                </tr>

            </table>

            <table style="border: 1px solid #000000 !important; width: 100%;margin-bottom: 16px;" class="table-sm o_main_table">
                <tr style="border-top: 1px solid #000000 !important;">

                    <td style="border-top: 1px solid #000000 !important;">FECHA DE SOLICITUD:</td>
                    <td style="border-top: 1px solid #000000 !important;">
                        <t t-if="o.custom_requisition_id.request_date">
                            <t t-esc="o.custom_requisition_id.request_date.strftime('%d/%m/%Y')"/>
                        </t>

                    </td>
                    <td style="border-top: 1px solid #000000 !important;"></td>
                    <td style="border-top: 1px solid #000000 !important;"></td>
                    <td style="border-top: 1px solid #000000 !important;"></td>
                    <td style="border-top: 1px solid #000000 !important;"></td>

                </tr>
                <tr style="border-top: 1px solid #FFFFFF !important;">
                    <td >REQUISICIÓN No.:</td>
                    <td class="text-left"><t t-esc="o.origin"/></td>
                    <td >MONEDA:</td>
                    <td class="text-left"><t t-esc="o.currency_id.name"/></td>
                    <td >ORDEN DE COMPRA N.°:</td>
                    <td class="text-left"><t t-esc="o.name"/></td>
                </tr>
            </table>
            <table style="border: 1px solid #FFFFFF !important;  width: 100%;margin-bottom: 16px;" class="table-sm o_main_table">
                <tr style="border: 1px solid #000000 !important;font-size: 14px;">

                    <td colspan="2" style="border: 1px solid #000000 !important;text-align: center;background-color: #AB1D1D;color:#FFFFFF;"><strong>PROVEEDOR</strong></td>
                    <td colspan="2" style="border: 1px solid #000000 !important;text-align: center;background-color: #AB1D1D;color:#FFFFFF;"><strong>CONSIGNADO A:</strong></td>

                </tr>
                <tr style="border: 1px solid #FFFFFF !important;">
                    <td style="border: 1px solid #000000 !important;background-color: #C7C7C7;">Razón Social:</td>
                    <td style="border: 1px solid #000000 !important;" class="text-left"><t t-esc="o.partner_id.name"/></td>
                    <td colspan="2" style="border: 1px solid #000000 !important;" class="text-left"><t t-esc="o.company_id.name"/></td>

                </tr>
                <tr style="border: 1px solid #FFFFFF !important;">
                    <td style="border: 1px solid #000000 !important;background-color: #C7C7C7;">Nit:</td>
                    <td style="border: 1px solid #000000 !important;" class="text-left"><t t-esc="o.partner_id.vat"/>-<t t-esc="o.partner_id.check_digit"/></td>
                    <td colspan="2" style="border: 1px solid #000000 !important;" class="text-left"><t t-esc="o.company_id.partner_id.vat"/>-<t t-esc="o.company_id.partner_id.check_digit"/></td>

                </tr>
                <tr style="border: 1px solid #FFFFFF !important;">
                    <td style="border: 1px solid #000000 !important;background-color: #C7C7C7;">Dirección:</td>
                    <td style="border: 1px solid #000000 !important;" class="text-left"><t t-esc="o.partner_id.city_id.name"/>-<t t-esc="o.partner_id.state_id.name"/>-<t t-esc="o.partner_id.country_id.name"/></td>
                    <td colspan="2" style="border: 1px solid #000000 !important;" class="text-left"><t t-esc="o.company_id.partner_id.street"/>-<t t-esc="o.company_id.partner_id.city_id.name "/>-<t t-esc="o.company_id.partner_id.state_id.name"/>-<t t-esc="o.company_id.partner_id.country_id.name"/></td>

                </tr>
                <tr style="border: 1px solid #FFFFFF !important;">
                    <td style="border: 1px solid #000000 !important;background-color: #C7C7C7;">Teléfonos:</td>
                    <td style="border: 1px solid #000000 !important;" class="text-left"><t t-esc="o.partner_id.phone"/></td>
                    <td colspan="2" style="border: 1px solid #000000 !important;" class="text-left"><t t-esc="o.company_id.partner_id.phone"/></td>

                </tr>
                <tr style="border: 1px solid #FFFFFF !important;">
                    <td style="border: 1px solid #000000 !important;background-color: #C7C7C7;">Contacto:</td>
                    <td t-attf-class="text-left {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}" style="border: 1px solid #000000 !important;text-align: center;">
                        <span t-esc="', '.join(map(lambda x: (x.name), o.partner_id.child_ids))" id="line_child_ids"/>
                    </td>
                    <td colspan="2" style="border: 1px solid #000000 !important;border-bottom: 1px solid #000000 !important;text-align: center;"></td>

                </tr>
            </table>

            <table class="table table-sm o_main_table" style="border: 1px solid #000000 !important;">
                <colgroup>
                    <col span="1" style="width: 6%;"/>
                </colgroup>
                <thead class="text-center">

                    <tr style="border: 1px solid #000000 !important;text-align: center;background-color: #AB1D1D;color:#FFFFFF;">
                        <th style="border: 1px solid #000000;font-size: 14px;" colspan="9"><strong>DESCRIPCIÓN DE LA SOLICITUD</strong></th>

                    </tr>
                    <tr style="border: 1px solid #000000 !important;text-align: center;background-color: #C7C7C7;">
                        <th style="border: 1px solid #000000;"><strong>ITEM</strong></th>
                        <th style="border: 1px solid #000000;"><strong>DESCRIPCIÓN</strong></th>
                        <th style="border: 1px solid #000000;"><strong>REFERENCIA P/N</strong></th>
                        <th style="border: 1px solid #000000;" ><strong>CUENTA ANALÍTICA</strong></th>
                        <th style="border: 1px solid #000000;" ><strong>ETIQUETA ANALÍTICA</strong></th>
                        <th style="border: 1px solid #000000;" ><strong>CANT.</strong></th>
                        <th style="border: 1px solid #000000;" ><strong>VALOR UNT</strong></th>
                        <th style="border: 1px solid #000000;" ><strong>VALOR IMPUESTO</strong></th>
                        <th style="border: 1px solid #000000;"><strong>TOTAL</strong></th>
                    </tr>
                </thead>
                <tbody>
                    <t t-set="count" t-value="0"/>
                    <t t-set="current_subtotal" t-value="0"/>
                    <t t-set="subtotal" t-value="0"/>
                    <t t-set="price_tax" t-value="0"/>
                    <t t-set="total_custom" t-value="0"/>
                    <t t-foreach="o.order_line" t-as="line">

                        <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                        <t t-set="current_subtotal" t-value="current_subtotal + line.price_total" groups="account.group_show_line_subtotals_tax_included"/>

                        <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''" style="border: 1px solid #000000 !important;">
                            <t t-if="not line.display_type">




                                <t t-if="line.product_id.type =='service'">
                                    <t t-set="count" t-value="count + 1"/>
                                    <td id="count" style="border: 1px solid #000000;" class="text-center">
                                        <span t-esc="count"/>
                                    </td>

                                    <td id="names" style="border: 1px solid #000000;">
                                        <span t-field="line.name"/>
                                    </td>
                                    <td id="ref" style="border: 1px solid #000000;">
                                        <span t-field="line.product_id.default_code"/>
                                    </td>
                                    <td id="account_analytic_id" style="border: 1px solid #000000;">
                                        <span t-field="line.account_analytic_id"/>
                                    </td>
                                    <td id="analytic_tag_ids" style="border: 1px solid #000000;">
                                       <span t-esc="', '.join(map(lambda x: x.name, line.analytic_tag_ids))"/>
                                    </td>
                                    <td class="text-right" style="border: 1px solid #000000;">
                                        <span t-field="line.product_qty"/>
                                    </td>
                                    <td class="text-right" style="border: 1px solid #000000;">
                                        <span t-field="line.price_unit"/>
                                    </td>

                                    <td name="td_taxes" style="border: 1px solid #000000;" class="text-right">
                                        <span t-field="line.price_iva_tax" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                    </td>

                                    <td class="text-right" style="border: 1px solid #000000;">
                                        <span t-field="line.price_subtotal"
                                            t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                        <t t-set="price_tax" t-value="price_tax + line.price_tax"/>
                                        <t t-set="subtotal" t-value="subtotal + line.price_subtotal"/>
                                        <t t-set="total_custom" t-value="total_custom + (line.price_tax + line.price_subtotal)"/>
                                    </td>

                                </t>

                            </t>

                        </tr>

                    </t>
                    <tfoot style="font-size: 13px;">
                                    <tr style="border: 1px solid #000000;">
                                        <td rowspan="3" colspan="2" style="border: 1px solid #000000;">
                                            Observaciones:
                                        </td>
                                        <td rowspan="3" colspan="5">
                                            <span t-esc="o.reason_po"/>
                                        </td >

                                        <td style="border: 1px solid #000000;">
                                               SUBTOTAL
                                        </td>

                                        <td style="border: 1px solid #000000;" class="text-right">

                                                <span t-esc="subtotal" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>

                                        </td>
                                    </tr>

                                    <tr style="border: 1px solid #000000;">



                                        <td style="border: 1px solid #000000;">
                                               IVA 19%
                                        </td>

                                        <td style="border: 1px solid #000000;" class="text-right">
                                            <span t-esc="o.amount_tax_iva" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                        </td>
                                    </tr>

                                    <tr style="border: 1px solid #000000;">


                                        <td style="border: 1px solid #000000;">
                                               TOTAL
                                        </td>

                                        <td style="border: 1px solid #000000;" class="text-right">


                                                <span t-esc="total_custom" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>


                                        </td>

                                    </tr>
                    </tfoot>
                </tbody>
            </table>

            <table style="border: 1px solid #000000 !important;text-align: center;" class="table table-sm o_main_table">
                <tr style="border: 1px solid #000000 !important;background-color: #AB1D1D;color:#FFFFFF;font-size: 14px;">

                    <td style="border: 1px solid #000000 !important;width: 33%;"><strong>CONDICIONES DE PAGO</strong></td>
                    <td style="border: 1px solid #000000 !important;width: 33%;"><strong>FECHA ENTREGA ACORDADA</strong></td>
                    <td style="border: 1px solid #000000 !important;width: 33%;"><strong>FECHA DE VENCIMIENTO</strong></td>


                </tr>
                <tr style="border: 1px solid #000000 !important;">
                    <td style="border: 1px solid #000000 !important;"><span t-field="o.payment_term_id.name"/></td>

                    <td style="border: 1px solid #000000 !important;">
                        <t t-if="o.date_planned">
                            <span t-esc="o.date_planned.strftime('%d/%m/%Y')"/>
                        </t>
                    </td>
                    <td style="border: 1px solid #000000 !important;">

                        <t t-if="o.date_order">
                            <span t-esc="o.date_order.strftime('%d/%m/%Y')"/>
                        </t>
                    </td>

                </tr>
            </table>


            <table style="border: 1px solid #000000 !important;text-align: center;"
                           class="table table-sm o_main_table">
                        <tr style="border: 1px solid #000000 !important;;color:#FFFFFF;font-size: 14px;">
                            <td style="border: 1px solid #000000 !important; color: black !important;" colspan="3">
                                <strong>VERIFICACION DEL SUMINISTRO</strong>
                            </td>
                        </tr>
                        <tr style="border: 1px solid #000000 !important;;color:#FFFFFF;font-size: 14px;">
                            <td style="border: 1px solid #000000 !important; color: black !important;" colspan="3">
                                <strong>ESPACIO PARA SER DILIGENCIADO UNICAMENTE POR QUIEN HACE EL REQUERIMIENTO</strong>
                            </td>
                        </tr>
                        <tr style="border: 1px solid #000000 !important;;color:#FFFFFF;font-size: 14px;">
                            <td style="border: 1px solid #000000 !important; color: black !important;" width="40%">
                                1. Cumplimiento en la entrega
                            </td>
                            <td style="border: 1px solid #000000 !important; color: black !important;" width="10%">
                                <t t-if="o.delivery_compliance">
                                    SI
                                </t>
                                <t t-else="">
                                    NO
                                </t>
                            </td>
                            <td style="border: 1px solid #000000 !important; color: black !important; font-size: 11px !important;" width="50%" rowspan="3">
                                <b>VERIFICADO POR</b> <br/>
                                <t t-esc="o.verified_user_id.name"/><br/>
                                <t t-esc="o.verified_user_id.job_id.name"/>
                            </td>
                        </tr>
                        <tr style="border: 1px solid #000000 !important;;color:#FFFFFF;font-size: 14px;">
                            <td style="border: 1px solid #000000 !important; color: black !important;" width="40%">
                                2. Cumplimiento en especificaciones
                            </td>
                            <td style="border: 1px solid #000000 !important; color: black !important;" width="10%">
                                <t t-if="o.compliance_specifications">
                                    SI
                                </t>
                                <t t-else="">
                                    NO
                                </t>
                            </td>
                        </tr>
                        <tr style="border: 1px solid #000000 !important;;color:#FFFFFF;font-size: 14px;">
                            <td style="border: 1px solid #000000 !important; color: black !important;" width="40%">
                                3. Calificación de esta compra
                            </td>
                            <td style="border: 1px solid #000000 !important; color: black !important;" width="10%">
                                <t t-esc="o.calification"/>
                            </td>
                        </tr>
                        <tr style="border: 1px solid #000000 !important;;color:#FFFFFF;font-size: 14px; text-align: left;">
                            <td style="border: 1px solid #000000 !important; color: black !important;" width="50%">
                                Observaciones<br/>
                                <t t-esc="o.obs"/>
                            </td>
                            <td style="border: 1px solid #000000 !important; color: black !important;" width="50%" colspan="2">
                                Fecha<br/>
                                <span t-field="o.date_delivery_obs"/>
                            </td>
                        </tr>
                    </table>


            <table style="border: 1px solid #000000 !important;text-align: justify;" class="table table-sm o_main_table" >

                <tr style="border: 1px solid #000000 !important;">
                    <td style="border: 1px solid #000000 !important;">

                        Para el respectivo pago deberá enviar  la factura original, copia de esta orden de compra y remisión firmada por quién recibió el material o servicio, la cual para su aceptación debe coincidir con los valores, cantidades, razón social, Nit  y demás especificaciones con la presente orden de compra. Enviar factura electrónica al correo:  <span t-esc="o.company_id.email"/> .

                    </td>
                </tr>
                <tr style="border: 1px solid #000000 !important;">
                    <td style="border: 1px solid #000000 !important;" >
                        Entrega de Mercancía únicamente en Almacén de 8:00 am. a 12 pm. y de 2:00 a 4:00 pm. de Lunes a Viernes.
                        Al entregar la mercancía debe entregar copia de la orden de compra, remisión firmada. NO se aceptan  entregas parciales.
                        Entrega de facturas  ÚNICAMENTE  en recepción  de lunes a viernes de  8: 00 am  a  4: 00 pm.
                        Cierre de facturación 25 de cada mes.

                    </td>

                </tr>
                <tr style="border: 1px solid #000000 !important;">
                    <td style="border: 1px solid #000000 !important;">

                        <p>
PROTECCIÓN DE DATOS, con la expedición de la Ley 1581 de 2012 y el Decreto 1377 de 2013, entra en vigencia el RÉGIMEN GENERAL DE PROTECCIÓN DE DATOS PERSONALES, en donde se desarrolla el derecho constitucional que tienen todas las personas a conocer, actualizar y rectificar todo tipo de información recogida o que haya sido objeto de tratamiento de datos en general en archivos de entidades públicas y/o privadas. En cumplimiento a lo previsto en las normas precitadas, <span t-field="o.company_id"/>,  siendo responsable del tratamiento de datos personales obtenidos a través de sus distintos canales de comercialización y contacto, solicita a toda persona JURÍDICA O NATURAL, nos autoricen para continuar con el tratamiento de sus datos personales cumpliendo la responsabilidad de Políticas de Privacidad.

                        </p>

                        <p>
La información suministrada a <span t-field="o.company_id"/>, por ustedes, podrá ser utilizados, para fines del desarrollo de las funciones propias de la prestación de sus servicios, y relaciones comerciales. En consecuencia y de conformidad con los procedimientos contenidos en la mencionada ley, usted como titular de la información objeto de tratamiento, podrá ejercer sus derechos a solicitar, conocer, actualizar y rectificar sus datos personales y también suprimir sus datos mediante su respuesta por vía email servicioalcliente@aercaribe.com o por el medio que ustedes estimen conveniente.

                        </p>

                        <p>
En lo dispuesto en el artículo 10 del decreto 1377 de 2013, <span t-field="o.company_id"/> , quedará autorizado de manera expresa para mantener y manejar la información personal suministrada, a no ser que usted manifieste lo contrario de forma directa, expresa, inequívoca por cualquiera de los canales anteriormente mencionados.
                        </p>


                    </td>

                </tr>


            </table>

            <p t-field="o.notes"/>
            <div class="oe_structure"/>

            </FONT>
        </div>
    </t>
</template>

<template id="report_purchaseorder_custom_service_order">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="credport_quanamco.report_purchaseorder_document_custom_service_order" t-lang="o.partner_id.lang"/>
        </t>
    </t>
</template>
</odoo>
